1. Création des volumes gitlab : 
===========================
=> docker volume create gitlab-config 
=> docker volume create gitlab-logs 
=> docker volume create gitlab-data
=> docker volume create gitlab-runner-config
=> cd Gitlab_plus_runner 
=> docker compose up --build
=> docker compose up -d --build (Utilisation en mode détaché)

2. Première utilisation gitlab :
=====================================
=> docker container exec -it gitlab sh
=> cd etc/gitlab 
=> cat initial_root_password 
**  Récupérer => password
** Dans navigateur => http://localhost:9999
** Nom d'utilisateur : root 
** Mot de passe : (password récupéré plus tôt) 
** Préférences => password => current password (identique au précédent) => New password (votre mdp) + répétition
** Préférences => SSH Keys => Add new Key
=> cd ~/.ssh 
=> cat id_rsa.pub 
** copier la Clé publique obtenue dans le Champ "Key" de Gitlab => Supprimer la date d'expiration => enregistrer

3. Créer un projet :
======================
** Projects => Create a project
** Create blank project

4. connecter Gitlab au runner :
========================
Dans Gitlab
** Settings => CI/CD => Runners => Expand
** New project runner => Linux 
=> Tags : nsa 
** Cocher Run untagged jobs
** Create Runner 

Dans Gitlab-runner 
=> gitlab-runner register
=> http://gitlab:9999 (Ici je mets le nom du container gitlab car sur le même réseau que le runner)
=> je rentre le token
=> je donne un nom au runner : nsa_runner
=> Je choisis un executeur : docker 
=> je choisis un type d'image par defaut : alpine 


Seconde possibilité :  (ne pas oublier de remplacer le token)
gitlab-runner register \
  --non-interactive \
  --executor docker \
  --docker-image "alpine:latest" \
  --url "http://gitlab:9999" \
  --registration-token "glrt-q9sRGn-GHs4BaxWRCnQ7" \
  --description "docker-runner" \
  --tag-list "docker,alpine" \
  --docker-network-mode "gitlab_plus_runner_gitlab-network" \
  --clone_url "http://gitlab:9999"



